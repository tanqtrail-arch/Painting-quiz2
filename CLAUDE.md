# Painting Quiz v2 - 設計書

## プロジェクト概要
世界の名画クイズアプリ（GitHub Pages）のバージョンアップ。
小学5年〜中学生が直感的に使える美術館風クイズ＆図鑑アプリ。

## ターゲット
- 小学5〜6年生、中学生
- ふりがな不要、漢字OK
- 直感的・ビジュアル重視のUI

## 技術スタック
- HTML/CSS/JavaScript（バニラ、フレームワーク不使用）
- GitHub Pages でホスティング
- Wikimedia Commons API で画像取得
- LocalStorage でデータ永続化

## ファイル構成
```
Painting-quiz2/
├── index.html              # メインHTML（SPA）
├── css/
│   └── style.css           # メインスタイル（CSS変数で配色管理）
├── js/
│   ├── app.js              # アプリ初期化・ルーティング・画面切り替え
│   ├── quiz.js             # クイズロジック
│   ├── collection.js       # コレクション（図鑑）ロジック
│   └── data-loader.js      # paintings.json読み込み・画像プリロード
├── data/
│   └── paintings.json      # 100作品のデータ
├── scripts/
│   ├── fetch-paintings.js  # Wikimedia API画像取得スクリプト（Node.js）
│   └── validate-images.js  # 画像URL検証スクリプト
├── assets/
│   └── icons/              # UIアイコン（SVG）
├── docs/
│   └── design-spec.md      # デザイン仕様
└── CLAUDE.md               # この設計書
```

## デザイン仕様

### 配色（CSS変数）
```css
:root {
  --bg-primary: #1a1a2e;        /* 深いネイビー（美術館の壁） */
  --bg-secondary: #16213e;      /* やや明るいネイビー */
  --bg-card: #ffffff;           /* カード背景 */
  --accent-gold: #e8b830;       /* ゴールド（アクセント） */
  --accent-gold-light: #f5d76e; /* ゴールド薄め */
  --text-primary: #2c3e50;      /* メインテキスト */
  --text-light: #f0f0f0;        /* 暗い背景上のテキスト */
  --success: #27ae60;           /* 正解グリーン */
  --error: #e74c3c;             /* 不正解レッド */
  --border-radius: 16px;        /* カード角丸 */
  --shadow: 0 4px 20px rgba(0,0,0,0.15);
}
```

### UIルール
- ボタン: min-height 52px、角丸12px、タップで軽く沈むアニメーション（0.95 scale）
- カード: 白背景、角丸16px、やわらかいシャドウ
- フォント: 本文16-18px、見出し20-24px
- 画面下部タブバー: 🎨クイズ / 📖コレクション / ⚙️設定
  - アイコン＋短いラベル、選択中はゴールドにハイライト
- 正解フィードバック: ボタンが緑 + 画面にうっすら緑のフラッシュ + ✨パーティクル(CSS)
- 不正解フィードバック: ボタンが赤 + 軽いシェイク + 正解ボタンが光る（「おしい！」の雰囲気）
- 画面遷移: フェード（0.3s ease）
- スマホファースト、タブレットでも崩れない

### 画面ID（HTML）
- `#screen-home` - クイズ開始画面（ジャンル・難易度選択）
- `#screen-quiz` - クイズ出題画面
- `#screen-result` - クイズ結果画面
- `#screen-collection` - コレクション（図鑑）画面
- `#screen-detail-modal` - 作品詳細モーダル
- `#screen-settings` - 設定画面
- `#tab-bar` - 画面下部固定タブバー

### クイズ開始画面
- ジャンル選択: チップ型（横スクロール、タップでON/OFF、選択中は色変化）
- 難易度: ★★★の3段階カード型
- スタートボタン: 大きなゴールドボタン、中央配置

### クイズ画面レイアウト
- 上部60%: 絵画を大きく表示（アスペクト比保持、暗い背景）
- 下部40%: 選択肢カード（白背景、角丸、シャドウ）
- 問題数・正解数の進捗バー（細いゴールドのライン）

### コレクション画面
- 2列グリッド（サムネイル＋作品名）
- 未取得: モノクロ＋鍵アイコンオーバーレイ
- 取得済み: カラー表示
- タップで詳細モーダル
- 上部にジャンルフィルターチップ（横スクロール）
- 進捗バー「32/100作品」

### 結果画面
- 大きなスコア表示
- メダル: 90%以上🏆 / 70%以上🥈 / 50%以上🥉
- 正解作品のサムネグリッド
- 紙吹雪CSS（90%以上の時）

### 詳細モーダル
- 作品画像（大）
- 作品名 / 作者 / 制作年 / 所蔵美術館
- trivia（豆知識）を吹き出し風デザインで表示
- 「もっと知りたい → Wikipedia」リンク

## データ形式（paintings.json）
```json
{
  "id": 1,
  "title_ja": "モナ・リザ",
  "title_en": "Mona Lisa",
  "artist_ja": "レオナルド・ダ・ヴィンチ",
  "artist_en": "Leonardo da Vinci",
  "year": "1503-1519",
  "genre": "肖像画",
  "museum": "ルーヴル美術館",
  "image": "https://upload.wikimedia.org/wikipedia/commons/thumb/6/6a/Mona_Lisa.jpg/600px-Mona_Lisa.jpg",
  "image_thumb": "https://upload.wikimedia.org/wikipedia/commons/thumb/6/6a/Mona_Lisa.jpg/300px-Mona_Lisa.jpg",
  "wiki_filename": "Mona_Lisa.jpg",
  "difficulty": 1,
  "trivia": "実はこの絵、ナポレオンが自分の寝室にかざっていたことがある。描かれた女性が誰なのか、500年たった今でもナゾが残っている。"
}
```

## triviaの書き方ルール
- 小5〜6年生が読んで「へぇ！」「すごい！」と思う内容
- 1エントリ2〜3文、80文字前後
- 難しい専門用語は使わない（「遠近法」→OK、「スフマート技法」→NG）
- 「実は〜」「じつは〜」「知ってた？」のように興味を引く書き出し
- 作品の裏話、意外なエピソード、数字で驚くネタを優先

## genre一覧
肖像画 / 風景画 / 宗教画 / 歴史画 / 静物画 / 風俗画 / 浮世絵 / 抽象画 / 神話画

## difficulty
- 1: 有名（モナ・リザ等）→ かんたんモードで出題、選択肢3つ
- 2: やや通向け → ふつうモードで出題、選択肢4つ
- 3: 通向け → むずかしいモードで出題、選択肢4つ

## クイズモード
1. 作品名当て: 絵を見て作品名を選ぶ
2. 作者当て: 絵を見て作者を選ぶ
3. ジャンル当て: 絵を見てジャンルを選ぶ

## 選択肢生成ルール
- 正解1つ + ダミー2〜3つ
- ダミーは同ジャンル or 同時代の作品から優先選出（紛らわしくする）
- 同じ選択肢が重複しないこと

## コレクション（図鑑）ルール
- 1つの作品で3モード（作品名・作者・ジャンル）全正解 → コレクション追加
- コレクション済み作品は図鑑でカラー表示
- 未取得作品はモノクロ＋鍵アイコン

## 既存機能（維持すること）
- ALTコイン連携（TRAILポータル）
- TrailSDK連携（存在する場合）
- LocalStorageのコレクションデータ（形式変更時はマイグレーション処理）

## 連続正解演出
- 3連続: 「3連続正解！🔥」
- 5連続: 「5連続！すごい！🔥🔥」
- 10連続: 「10連続！天才！🔥🔥🔥」

## チュートリアル（初回のみ）
3枚のスライド:
1. 「クイズに答えよう」
2. 「コレクションを集めよう」
3. 「目指せ全作品制覇！」

## 画像サイズ
- クイズ表示用: 600px幅（image）
- コレクション一覧用: 300px幅（image_thumb）
- Wikimedia CommonsのサムネイルURL形式を使用
